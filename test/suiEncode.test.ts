import { suiEncode } from "../packages/client/src/suiEncode";

describe("suiEncode", () => {
  it("should encode type arguments, objects and message correctly", async () => {
    const input = {
      typeArguments: [
        "0xc65bccdb25735cc25681c1f6f2d1f1a5882969da2ec0de2782b861f0cc32815a::token::TOKEN",
      ],
      objects: [
        "0xd602b62bf03791e660d3fcb828ad30a1d6505de7ee91849e42ee83d0da363a1f",
        "0xfc5293950ae8401435f84e7a4984a5b0a8ef591198330735cc4254d2e34e39a5",
        "0x688bdb0edba8ae291968ba10adb33c26fc4370360eb575698a3472e8962067ec",
        "0x71218d15d4899b7356f4eb9425e7b66a726151eab8d4dd687aa3bad3706a2d1d",
      ],
      data: "0xa914ba15f2d1268994cbe658b2a34495926bd90c352ff17124c1ff6396b75fb7",
    };

    const expected =
      "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000503078633635626363646232353733356363323536383163316636663264316631613538383239363964613265633064653237383262383631663063633332383135613a3a746f6b656e3a3a544f4b454e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004d602b62bf03791e660d3fcb828ad30a1d6505de7ee91849e42ee83d0da363a1ffc5293950ae8401435f84e7a4984a5b0a8ef591198330735cc4254d2e34e39a5688bdb0edba8ae291968ba10adb33c26fc4370360eb575698a3472e8962067ec71218d15d4899b7356f4eb9425e7b66a726151eab8d4dd687aa3bad3706a2d1d0000000000000000000000000000000000000000000000000000000000000020a914ba15f2d1268994cbe658b2a34495926bd90c352ff17124c1ff6396b75fb7";

    const result = await suiEncode(input);
    expect(result).toBe(expected);
  });
});
